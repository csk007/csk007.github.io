<!DOCTYPE html>
<head>
  <base target="self">
  <meta charset="UTF-8"> 
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <!--<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.1.3/dist/litera/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link id="bsdp-css" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" rel="stylesheet">
    <link href="https://jdewit.github.io/bootstrap-timepicker/css/timepicker.less"  rel="stylesheet">
    <link href="https://lonekorean.github.io/highlight-within-textarea/jquery.highlight-within-textarea.css"   rel="stylesheet">
    <!--<link href="https://www.jqueryscript.net/demo/emoji-picker-twemoji/css/emojis.css"  rel="stylesheet">-->
    <style>
    .card-img-top{
      max-height:350px;
    }

    .highlight-text{
      color: rgb(20,162,184);
    }

    .highlight-text-cap{
      color: blue;
      text-transform: uppercase;
    }

    a, u {
       text-decoration: none;
    }

    .disable-card {
      background-color: rgba(245, 245, 245, 1);
      opacity: .4;
    }

    .disable-card-60 {
      background-color: rgba(245, 245, 245, 1);
      opacity: .6;
    }

    </style>
    <title>CSK Vrati Info</title>

</head>
<body style="font-weight:600">
<!--<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container-fluid">

    <a class="navbar-brand" href="#"><img src="https://www.learngeeta.com/wp-content/uploads/2020/07/Logo-Gita-Parivar.png" width="30" height="30" class="d-inline-block align-top" alt="">&nbsp;&nbsp;Praveg Sandesh - AutoMagic Message Creator</a>
    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
      </ul>
    </div>
  </div>
</nav>
<br/>-->
<div class="container-fluid">
    <br/>
    <div class="row">
    <div class="col-12">
          <div class="card">
            <div class="card-header" >
              CSK Next Vrati Info: <span id="refresh-timer" class="pull-right"></span>
            </div>
            <div class="card-body">
              <div class="container mx-0 px-0">
                <div class="row saturday-info-grid">
                  <!--<div class="wednesdays-info-grid"></div>-->
                </div>
              </div>
            </div>
          </div>
    </div>
    </div><br/><br/>
    <div class="row">
      <!--<div class="alert alert-dismissible alert-success">
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        <span class="alert-text"><strong>üôèüèª Namaste üôèüèª</strong> Welcome To Kumarans Wednesday T-Shirt Info BY CSK</b> üôÇ Have a Nice Day.</span>
      </div>-->
      <div class="col-12">
          <div class="card">
            <div class="card-header">
              Saturdays Of The Month
            </div>
            <div class="card-body">
              <div class="container">
                <div class="row">
                  <div class="saturdays-grid"></div>
                </div>
              </div>
            </div>

          </div>
      
      </div>
  </div>
  <br>
 
 <div class="row">
      <div class="col-12">
          <div class="card">
            <div class="card-header">
              Tips:
            </div>
            <div class="card-body">
              <div class="container">
                <div class="row">
                  <div class="wednesdays-dev-info-grid">
                    Please make sure your device time is correctly updated and is in sync with the world to display the correct information :)
                  </div>
                </div>
              </div>
            </div>

          </div>
      
      </div>
  </div>
<br/>

  <div class="row">
      <div class="col-12">
          <div class="card disable-card-60">
            <div class="card-header">
              Feedback / Suggestions:
            </div>
            <div class="card-body">
              <div class="container">
                <div class="row">
                  <div class="wednesdays-dev-info-grid">
                    <a href="https://wa.me/+919886138881?text=Hi, Regarding the Wednesday T shirt Portal"><i class="fa fa-whatsapp" aria-hidden="true"></i> Chandrashekar SK (Ansh - 2C) </a>    <br/><br/><a href="mailto:csk007@gmail.com?subject=Kumarans Wednesday Tshirt Info Portal&body=Hey Hi,"><i class="fa fa-envelope-o" aria-hidden="true"></i> csk007@gmail.com</a> 
                  </div>
                </div>
              </div>
            </div>

          </div>
      
      </div>
  </div>
  <br/>

    <br/>


</div>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment.min.js"></script>
    <script type="text/javascript" src="https://jdewit.github.io/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
    <!--<script type="text/javascript" src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js"></script>-->
    <!--<script type="text/javascript" src="https://www.jqueryscript.net/demo/emoji-picker-twemoji/js/DisMojiPicker.js"></script>-->
    <script type="text/javascript" src="https://lonekorean.github.io/highlight-within-textarea/jquery.highlight-within-textarea.js"></script>
    
    <script>

var options = {weekday: 'long',year: 'numeric', month: 'short', day: 'numeric' };
var options2 = {weekday: 'long', month: 'long', day: 'numeric' };

var saturdays = [];


var todayStr = new Date().toLocaleDateString("en-IN", options2);

var today = new Date();



// testing for all today scenarios 
//today.setDate(today.getDate() + 120);

var nextMonth = new Date(today.getFullYear() + 1, 0, 1);

if (today.getMonth() === 11) {
    nextMonth = new Date(today.getFullYear() + 1, 0, 1);
} else {
    nextMonth = new Date(today.getFullYear(), today.getMonth() + 1, 1);
}


console.log('today',today)
saturdays = getSaturdaysOfMonth(today);

console.log('saturdays this month: ',saturdays);
console.log('2nd Saturday this month: ',saturdays[1])

if (today <= saturdays[1]) {
    console.log('VRATI is in this month');
    console.log('===VRATI date this month: ',saturdays[1]);
} else {
    console.log('VRATI is in next month');
    saturdays = getSaturdaysOfMonth(nextMonth);
    console.log('saturdays next month: ',saturdays);
    console.log('2nd Saturday next month: ',saturdays[1])
    console.log('===VRATI date next month: ',saturdays[1]);
}

var daysLeft = datediff(today,saturdays[1]);

console.log('daysLeft: ', daysLeft);

var finalStr ='';

if (daysLeft === 0){
  finalStr = 'Today is the second saturday of the month, which is your Vrati Day.';
} else if (daysLeft === 1){
    finalStr = 'Tomorrow is the second saturday of the month, which is your Vrati Day.';
} else if (daysLeft === 2){
    finalStr = 'Day After Tomorrow is the second saturday of the month, which is your Vrati Day.';
} else {
    finalStr = 'Your Next Vrati is on '+ saturdays[1].toLocaleDateString("en-IN", options2) +' it is the second saturday of the month, which is in '+daysLeft+' Days.';
}

const repromptStr = ' You can say list 1, list 2, list 3  or full list , to know all the items to take along. or just say bye to cancel.';
//finalStr = finalStr + repromptStr;

console.log('finalStr:',finalStr);

function getSaturdaysOfMonth(date) {
    var saturdaysTemp = [];
    var d = new Date(date);
    var month = d.getMonth();
    console.log('getSaturdaysOfMonth: next sat month 0-11: ',month);
    d.setDate(1);
    console.log('getSaturdaysOfMonth d: ',d);
    console.log('getSaturdaysOfMonth month: ',month);
    // Get the first Saturday in the month
    while (d.getDay() !== 6) {
        d.setDate(d.getDate() + 1);
    }
    console.log('getSaturdaysOfMonth 1st sat of month: ',d);
    // Get all the other Saturdays in the month
    while (d.getMonth() === month) {
        var sat = new Date(d.getTime());
        saturdaysTemp.push(sat);
        d.setDate(d.getDate() + 7);
    }
  return saturdaysTemp;
}

function datediff(first, second) {        
    return Math.round((second - first) / (1000 * 60 * 60 * 24));
}

function renderSaturdaysGridInfo(){
      //console.log("renderWednesdaysGridInfo: ",window.wednesdays);
      var htmlStr ='<div class="col-8 col-md-8 col-sm-8">Today: <br/><span class="highlight-text">' +today+
      '</span><hr/>Upcoming Vrati ('+daysLeft+' Days Left): <br/><span class="highlight-text">'+ saturdays[1].toLocaleDateString("en-IN", options2)+ 
      '</span><hr/>Summary: <br/><span class="highlight-text">' +finalStr+
      '</span></div>';

      $(".saturday-info-grid").empty();
      $(".saturday-info-grid").append(htmlStr);

      htmlStr ='';
      for(var i=0; i<saturdays.length; i++){
        if (i == 1){
          htmlStr = htmlStr + '<div class = "col-12"><div class="card border-info"><div class="card-header text-info">'+saturdays[i].toLocaleDateString("en-IN", options)+'</div></div></div><br/>';
        } else {
          htmlStr = htmlStr + '<div class = "col-12"><div class="card disable-card"><div class="card-header">'+saturdays[i].toLocaleDateString("en-IN", options)+'</div></div></div><br/>';
        }
      };
      $(".saturdays-grid").empty();
      $(".saturdays-grid").append(htmlStr);
}

  renderSaturdaysGridInfo();
    
</script>

</body>

</html>
    